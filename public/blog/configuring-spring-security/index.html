
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Configuring Spring Security.. - Ikenna Okpala: London Based Software Developer </title>
  <meta name="author" content="Ikenna Okpala">

  
  <meta name="description" content="Hi, I am Ikenna Okpala, a london based software developer. This is my personal website and blog. I spend my daytime building Web Applications (Development and Architecture), Agile Coaching and Life Enrichment. Feel free to look around. There is not traffic in the extra mile. --Rickey Minor">
  <!-- <meta name="description" content="Over the years web application security has continued to be a critical issue. This area of concern is a major source of worry for most enterprise &hellip;"> -->
  
  <meta name="keywords" content="web development specialist, ruby, ruby on rails, javascript and/or coffeescript, jquery, underscrore.js, backbone.js, java, scala, , postgresql, mysql, teradata, oracle, unix/linux, nginx, git, capistrano and agile methodologies">
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ikennaokpala.com/blog/configuring-spring-security">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Ikenna Okpala" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40007650-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="mailto:me@ikennaokpala.com?Subject=Hello" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ikennaokpala.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            Ikenna Okpala
        </span>
       
           <span class="blue_dark">
             
           </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Configuring Spring Security..</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-05-21T16:57:47+01:00" pubdate data-updated="true">May 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Over the years web application security has continued to be a critical issue. This area of concern is a major source of worry for most enterprise application developers.</p>

<p>We as software developers, are faced with the task of securing valuable data that exist within our applications. This data could vary from  email account secured with a username / password pair or a brokerage account secured with a trading PIN, protecting an application is a important aspect of most applications, if not all.  (Walls C., 2007).</p>

<!--more-->


<p>According to <a href="http://www.jroller.com/habuma/">Craig Walls</a> (2007, pg 248), Security is a concern that transcends an application’s functionality. For the most part, an application should play no part in securing itself. Although you could write security functionality directly into your application’s code (and that’s not uncommon), it is better to keep security concerns separate from application concerns.</p>

<p>One of the popular options for the enterprise java world is spring&#8217;s security framework (formerly Acegi).</p>

<p><a href="http://www.jroller.com/habuma/">Craigs Walls</a> in his spring in action book defined spring security as  <em>&#8220;a security framework that provides declarative security for your Spring-based applications.&#8221;</em></p>

<p>In this blog post, I intend to share my personal experience configuring spring security.</p>

<p>Firstly there are a few requirements (jars). you will need to define the following in your maven pom.xml file.</p>

<div>
  <pre><code class='xml'>&lt;dependency&gt;
 &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
 &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;
 &lt;version&gt;2.0.4&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
 &lt;artifactId&gt;spring-security-core-tiger&lt;/artifactId&gt;
 &lt;version&gt;2.0.4&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
 &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;
 &lt;version&gt;2.0.4&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
 &lt;artifactId&gt;spring-security-acl&lt;/artifactId&gt;
 &lt;version&gt;2.0.4&lt;/version&gt;
 &lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
 &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;
 &lt;version&gt;1.5.4&lt;/version&gt;
 &lt;/dependency&gt;</code></pre>
</div>


<p>Next task is configuring the Web.xml file:</p>

<div>
  <pre><code class='xml'>&lt;context-param&gt;
 &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
 &lt;param-value&gt;
 classpath:applicationContext.xml
 &lt;/param-value&gt;
 &lt;/context-param&gt;

 &lt;listener&gt;
 &lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;

 &lt;/listener&gt;

 &lt;filter&gt;
 &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;
 &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;
 &lt;/filter&gt;

 &lt;filter-mapping&gt;
 &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;
 &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
 &lt;/filter-mapping&gt;</code></pre>
</div>


<p>Every Spring application requires an applications context, this is a primary requirement of all spring based applications, this is a trimmed down version focusing on the topic of this blog post.</p>

<div>
  <pre><code class='xml'>&lt;?xml version=&quot;1.0&quot; encoding=&quot;MacRoman&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xmlns:security=&quot;http://www.springframework.org/schema/security&quot;
xmlns:lang=&quot;http://www.springframework.org/schema/lang&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-2.5.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-2.0.xsd
http://www.springframework.org/schema/lang
http://www.springframework.org/schema/lang/spring-lang-2.5.xsd&quot;&gt;
&lt;context:component-scan base-package=&quot;com.example&quot; /&gt;
&lt;security:http auto-config=&#39;false&#39;&gt;
&lt;security:intercept-url pattern=&quot;/includes/**&quot; access=&quot;IS_AUTHENTICATED_ANONYMOUSLY&quot; filters=&quot;none&quot; /&gt;
&lt;security:intercept-url pattern=&quot;/favicon.ico&quot; access=&quot;IS_AUTHENTICATED_ANONYMOUSLY&quot; filters=&quot;none&quot; /&gt;
&lt;security:intercept-url pattern=&quot;/login.jsp&quot; filters=&quot;none&quot;/&gt;
&lt;security:intercept-url pattern=&quot;/**&quot; access=&quot;ROLE_USER&quot; filters=&quot;none&quot; /&gt;
&lt;security:form-login login-page=&quot;/login.jsp&quot; authentication-failure-url=&quot;/login.jsp?login_error=1&quot; /&gt;
&lt;security:concurrent-session-control max-sessions=&quot;1&quot;/&gt;
&lt;security:logout logout-url=&quot;/logout&quot; logout-success-url=&quot;/&quot;/&gt;
&lt;/security:http&gt;
&lt;security:authentication-provider&gt;
&lt;security:password-encoder hash=&quot;md5&quot; /&gt;
&lt;security:user-service&gt;
&lt;security:user name=&quot;ikenna&quot; password=&quot;3d801aa532c1cec3ee82d87a99fdf63f&quot; authorities=&quot;ROLE_USER&quot; /&gt;
&lt;security:user name=&quot;admin&quot; password=&quot;21232f297a57a5a743894a0e4a801fc3&quot; authorities=&quot;ROLE_USER&quot; /&gt;
&lt;security:user name=&quot;test&quot; password=&quot;098f6bcd4621d373cade4e832627b4f6&quot; authorities=&quot;ROLE_USER&quot; /&gt;
&lt;/security:user-service&gt;
&lt;/security:authentication-provider&gt;
&lt;/beans&gt;</code></pre>
</div>


<p>Finally the login.jsp page. This page hold the form tags and should be placed in the root of the webapps foilder.</p>

<div>
  <pre><code class='html'>&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;MacRoman&quot;%&gt;
&lt;%@ taglib prefix=&#39;c&#39; uri=&#39;http://java.sun.com/jstl/core_rt&#39; %&gt;
&lt;%@ page import=&quot;org.springframework.security.ui.AbstractProcessingFilter&quot; %&gt;
&lt;%@ page import=&quot;org.springframework.security.ui.webapp.AuthenticationProcessingFilter&quot; %&gt;
&lt;%@ page import=&quot;org.springframework.security.AuthenticationException&quot; %&gt;
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;
 &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;
&lt;html&gt;
 &lt;head&gt;
 &lt;title&gt; Login Page&lt;/title&gt;
 &lt;link href=&quot;&lt;c:url value=&quot;includes/stylesheets/main.css&quot; /&gt;&quot; media=&quot;screen&quot;  rel=&quot;Stylesheet&quot; type=&quot;text/css&quot; /&gt;
 &lt;link href=&quot;&lt;c:url value=&quot;includes/stylesheets/calendar.css&quot; /&gt;&quot; media=&quot;screen&quot; rel=&quot;Stylesheet&quot; type=&quot;text/css&quot; /&gt;
 &lt;link href=&quot;&lt;c:url value=&quot;includes/stylesheets/forms.css&quot; /&gt;&quot; media=&quot;screen&quot; rel=&quot;Stylesheet&quot; type=&quot;text/css&quot; /&gt;
 &lt;/head&gt;
 &lt;body&gt;
 &lt;h1&gt;Login &lt;/h1&gt;
&lt;c:if test=&quot;${not empty param.login_error}&quot;&gt;
 &lt;font color=&quot;red&quot;&gt;
 Your login attempt was not successful, try again.&lt;br/&gt;&lt;br/&gt;
 Reason: &lt;c:out value=&quot;${SPRING_SECURITY_LAST_EXCEPTION.message}&quot;/&gt;.
 &lt;/font&gt;
 &lt;/c:if&gt;&lt;br&gt;&lt;br&gt;
 &lt;form name=&quot;f&quot; action=&quot;&lt;c:url value=&#39;j_spring_security_check&#39;/&gt;&quot; method=&quot;POST&quot;&gt;
 &lt;fieldset&gt;
 &lt;legend&gt;Log In Form&lt;/legend&gt; &lt;hr&gt;
 &lt;ol&gt;
 &lt;li&gt;&lt;label for=&quot;login&quot;&gt;Username:&lt;/label&gt;
 &lt;input type=&#39;text&#39; name=&#39;j_username&#39; value=&#39;&lt;c:if test=&quot;${not empty param.login_error}&quot;&gt;&lt;c:out value=&quot;${SPRING_SECURITY_LAST_USERNAME}&quot;/&gt;&lt;/c:if&gt;&#39;/&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;
 &lt;input type=&#39;password&#39; name=&#39;j_password&#39;/&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;label for=&quot;remember_me&quot;&gt;Remember me:&lt;/label&gt;
 &lt;input type=&quot;checkbox&quot; name=&quot;_spring_security_remember_me&quot;&gt;
 &lt;/li&gt;
 &lt;/ol&gt;
 &lt;div&gt;
 &lt;input name=&quot;reset&quot; type=&quot;reset&quot; value=&quot;Reset&quot;  onclick=&quot;return confirm(&#39;Are you sure you want to Clear or Reset this form&#39;);&quot;&gt;
 &lt;input name=&quot;submit&quot; type=&quot;submit&quot; value=&quot;Log In&quot;&gt;
 &lt;/div&gt;
 &lt;/fieldset&gt;
 &lt;/form
 &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>


<p>One thing though, I struggled with is spring security not by passing the resources (<em>.js, </em>.css, and images etc..) declared the head section of my login.jsp file.</p>

<p>I noticed Spring security takes into account all the resources that are declared in the *.jsp pages and will atempt to display the last resource it remembered (declared in the login.jsp page).Also modern browsers request for the favicon.ico file from the web pages, I notice spring security required me to let it know that the resources should not be a priority to it.</p>

<p>I would suggest copying all your <em>.js, </em>.css, and images etc.. in to one folder (includes) and then declare the folder as IS_AUTHENTICATED_ANONYMOUSLY also setting the filters off.</p>

<div>
  <pre><code class='xml'>&lt;security:intercept-url pattern=&quot;/includes/**&quot; access=&quot;IS_AUTHENTICATED_ANONYMOUSLY&quot; filters=&quot;none&quot; /&gt;
&lt;security:intercept-url pattern=&quot;/favicon.ico&quot; access=&quot;IS_AUTHENTICATED_ANONYMOUSLY&quot; filters=&quot;none&quot; /&gt;</code></pre>
</div>


<p>REFERENCE:
Walls C., Breidenbach R. 2007. Spring in Action Second Edition, Manning Publishers.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Ikenna Okpala</span></span>

      








  


<time datetime="2010-05-21T16:57:47+01:00" pubdate data-updated="true">May 21<span>st</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>JAVA</a>, <a class='category' href='/blog/categories/maven/'>MAVEN</a>, <a class='category' href='/blog/categories/spring/'>SPRING</a>, <a class='category' href='/blog/categories/web-development/'>WEB DEVELOPMENT</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://ikennaokpala.com/blog/configuring-spring-security" data-via="ikenna_okpala" data-counturl="http://ikennaokpala.com/blog/configuring-spring-security" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/the-higher-order-style-functions" title="Previous Post: The Higher Order Style.. (Functions)">&laquo; The Higher Order Style.. (Functions)</a>
      
      
        <a class="basic-alignment right" href="/blog/populating-jsf-combo-box-with-database-values" title="Next Post: Populating JSF Combo Box with Database values. (or drop down list)...">Populating JSF Combo Box with Database values. (or drop down list)... &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite">
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/fix-openvpn-network-interface-mismatch">Fix OPENVPN Network Interface Mismatch</a>
      </li>
    
      <li class="post">
        <a href="/blog/a-look-at-Teradata-AMPs-">A Look At Teradata AMPs</a>
      </li>
    
      <li class="post">
        <a href="/blog/pow-ruby-version">Using .ruby-version with pow</a>
      </li>
    
      <li class="post">
        <a href="/blog/install-teradata-odbc-for-ruby-development">Install Teradata ODBC for Ruby development</a>
      </li>
    
      <li class="post">
        <a href="/blog/prioritizing-my-backlog-with-economics">Prioritizing My Backlog With Economics</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/ikennaokpala">@ikennaokpala</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ikennaokpala',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/kengimel?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/kengimel">My Delicious Bookmarks &raquo;</a></p>
</section>

<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:kengimel">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "kengimel"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/111621580960500743451?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section class="twitter2">
  <h1><a href="https://twitter.com/ikenna_okpala">@ikenna_okpala</a></h1>
  <br/>  <br/>
  <a href="https://twitter.com/ikenna_okpala" class="twitter-follow-button" data-show-count="false" data-lang="en" data-size="large">Follow @ikenna_okpala</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Ikenna Okpala -
  <span class="credit"><a href="/privacy"> Privacy Policy </a></span> -
  <span class="credit">Powered by <a href="http://octopress.org" target="_blank">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ikennaokpalasblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://ikennaokpala.com/blog/configuring-spring-security';
        var disqus_url = 'http://ikennaokpala.com/blog/configuring-spring-security';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
